<div class="container">
    <h2>Agregar productos</h2>
    <form [formGroup]="formProducto">
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="producto">Código</label>
                    <input class="form-control" type="text" placeholder="Código producto" formControlName="CODIGO">
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['CODIGO'].dirty && formProducto.controls['CODIGO'].invalid">
                    <div *ngIf="formProducto.controls['CODIGO'].errors !== null && formProducto.controls['CODIGO'].errors.required">
                        El Código es requerido.
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="producto">Código Barras</label>
                    <input class="form-control" type="text" placeholder="Código barras producto" formControlName="CODIGOBARRAS">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="producto">Producto</label>
            <input class="form-control" type="text" placeholder="Nombre producto" formControlName="PRODUCTO">
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['PRODUCTO'].dirty && formProducto.controls['PRODUCTO'].invalid">
            <div *ngIf="formProducto.controls['PRODUCTO'].errors !== null && formProducto.controls['PRODUCTO'].errors.required">
                El nombre del producto es requerido.
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="cantidad">Cantidad</label>
                    <input class="form-control" type="number" placeholder="Número de piezas" formControlName="CANTIDAD">
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['CANTIDAD'].dirty && formProducto.controls['CANTIDAD'].invalid">
                    <div *ngIf="formProducto.controls['CANTIDAD'].errors !== null && formProducto.controls['CANTIDAD'].errors.required">
                        La cantidad es requerida
                    </div>
                    <div *ngIf="formProducto.controls['CANTIDAD'].errors !== null && formProducto.controls['CANTIDAD'].errors.min">
                        El minimo es de 1
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="cantidad">Precio por unidad</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">$</span>
                        </div>
                        <input type="number" class="form-control" aria-label="Amount (to the nearest dollar)" placeholder="0.00" formControlName="PRECIO">
                    </div>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['PRECIO'].dirty && formProducto.controls['PRECIO'].invalid">
                    <div *ngIf="formProducto.controls['PRECIO'].errors !== null && formProducto.controls['PRECIO'].errors.required">
                        La precio es requerido
                    </div>
                    <div *ngIf="formProducto.controls['PRECIO'].errors !== null && formProducto.controls['PRECIO'].errors.min">
                        El minimo es de 0.10
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="cantidad">Categoría</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <label class="input-group-text" for="selectCategorias">Categorías</label>
                        </div>
                        <select class="custom-select" id="selectCategorias" formControlName="CATEGORIA">
                            <option value="" disabled>Seleccione una opcion</option>
                            <option *ngFor="let cat of categorias" [ngValue]="cat.ID">{{cat.NOMBRE}}</option>
                        </select>
                    </div>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['CATEGORIA'].dirty && formProducto.controls['CATEGORIA'].invalid">
                    <div *ngIf="formProducto.controls['CATEGORIA'].errors !== null && formProducto.controls['CATEGORIA'].errors.required">
                        La categoria es requerida
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="cantidad">Marca</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <label class="input-group-text" for="selectMarcas">Marcas</label>
                        </div>
                        <select class="custom-select" id="selectMarcas" formControlName="MARCA">
                            <option value="" disabled>Seleccione una opcion</option>
                            <option *ngFor="let marca of marcas" [ngValue]="marca.ID">{{marca.NOMBRE}}</option>
                        </select>
                    </div>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['MARCA'].dirty && formProducto.controls['MARCA'].invalid">
                    <div *ngIf="formProducto.controls['MARCA'].errors !== null && formProducto.controls['MARCA'].errors.required">
                        La marca es requerida
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="producto">Descripción</label>
            <input class="form-control" type="text" placeholder="Descripción del producto" formControlName="DESCRIPCION">
        </div>
        <div class="alert alert-danger" role="alert" *ngIf="formProducto.controls['DESCRIPCION'].dirty && formProducto.controls['DESCRIPCION'].invalid">
            <div *ngIf="formProducto.controls['DESCRIPCION'].errors !== null && formProducto.controls['DESCRIPCION'].errors.required">
                La descripción es requerida
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="producto">Medida</label>
                    <input class="form-control" type="text" placeholder="Medida del producto" formControlName="MEDIDA">
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="producto">Tipo de repuesto</label>
                    <input class="form-control" type="text" placeholder="Donde va la pieza[Motor, rueda, volante]" formControlName="TIPOREPUESTO">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="producto">Ubicación</label>
                    <select class="form-control" formControlName="UBICACION">
                        <option value="" disabled>Seleccione una opcion</option>
                        <option *ngFor="let local of locales" [ngValue]="local.ID">{{local.NOMBRE}}</option>
                    </select>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label for="imagenload">Subir imagen</label>
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Imagen</span>
                        </div>
                        <div class="custom-file">
                          <input type="file" class="custom-file-input" formControlName="IMGURL" (change)="uploadFile($event)" id="inputGroupFile01">
                          <label class="custom-file-label" for="inputGroupFile01">{{nameImagen}}</label>
                        </div>
                    </div>
                </div>
                <progressbar *ngIf="mostrarProgressbar" class="progress" [value]="porcentajeSubida" [max]="100">{{porcentajeSubida}}%</progressbar>
            </div>
        </div>
        <div class="text-right">
            <button [disabled]="!formProducto.valid || cargandoImagen" class="btn btn-primary" (click)="guardarProducto()">Guardar producto</button>
        </div>
    </form>
</div>
